[DEBUG] compile_basic_to_il: Starting...
[DEBUG] Starting pass1_collectDeclarations
[DEBUG] Starting pass2_validate
[DEBUG] pass2_validate: processing 15 lines
[DEBUG] pass2_validate: line 1000 has 1 statements
[DEBUG] validateStatement called for type: 2
[DEBUG] pass2_validate: line 1010 has 1 statements
[DEBUG] validateStatement called for type: 2
[DEBUG] pass2_validate: line 1020 has 1 statements
[DEBUG] validateStatement called for type: 2
[DEBUG] pass2_validate: line 1030 has 1 statements
[DEBUG] validateStatement called for type: 2
[DEBUG] pass2_validate: line 1040 has 1 statements
[DEBUG] validateStatement called for type: 7
[DEBUG] pass2_validate: line 1050 has 1 statements
[DEBUG] validateStatement called for type: 7
[DEBUG] pass2_validate: line 1060 has 1 statements
[DEBUG] validateStatement called for type: 7
[DEBUG] pass2_validate: line 1070 has 1 statements
[DEBUG] validateStatement called for type: 7
[DEBUG] pass2_validate: line 1080 has 1 statements
[DEBUG] validateStatement called for type: 2
[DEBUG] pass2_validate: line 1090 has 1 statements
[DEBUG] validateStatement called for type: 2
[DEBUG] pass2_validate: line 1100 has 1 statements
[DEBUG] validateStatement called for type: 28
[DEBUG] validateStatement called for type: 7
[DEBUG] validateStatement called for type: 7
[DEBUG] validateStatement called for type: 7
[DEBUG] validateStatement called for type: 22
[DEBUG] validateStatement called for type: 7
[DEBUG] validateStatement called for type: 22
[DEBUG] validateStatement called for type: 7
[DEBUG] validateStatement called for type: 22
[DEBUG] validateStatement called for type: 22
[DEBUG] validateStatement called for type: 22
[DEBUG] validateStatement called for type: 2
[DEBUG] validateStatement called for type: 2
[DEBUG] validateStatement called for type: 2
[DEBUG] validateStatement called for type: 2
[DEBUG] validateStatement called for type: 2
[DEBUG] validateStatement called for type: 2
[DEBUG] validateStatement called for type: 2
[DEBUG] validateStatement called for type: 2
[DEBUG] validateStatement called for type: 2
[DEBUG] validateStatement called for type: 2
[DEBUG] validateStatement called for type: 7
[DEBUG] validateStatement called for type: 7
[DEBUG] validateStatement called for type: 22
[DEBUG] validateStatement called for type: 2
[DEBUG] validateStatement called for type: 7
[DEBUG] pass2_validate: line 1110 has 1 statements
[DEBUG] validateStatement called for type: 22
[DEBUG] validateStatement called for type: 2
[DEBUG] validateStatement called for type: 2
[DEBUG] pass2_validate: line 1120 has 1 statements
[DEBUG] validateStatement called for type: 34
[DEBUG] pass2_validate: line 1130 has 1 statements
[DEBUG] validateStatement called for type: 93
[DEBUG] validateStatement called for type: 43
[DEBUG] validateStatement called for type: 43
[DEBUG] validateStatement called for type: 43
[DEBUG] validateStatement called for type: 43
[DEBUG] validateStatement called for type: 43
[DEBUG] validateStatement called for type: 22
[DEBUG] validateStatement called for type: 16
[DEBUG] validateStatement called for type: 22
[DEBUG] validateStatement called for type: 16
[DEBUG] validateStatement called for type: 22
[DEBUG] validateStatement called for type: 16
[DEBUG] validateStatement called for type: 7
[DEBUG] validateStatement called for type: 22
[DEBUG] validateStatement called for type: 16
[DEBUG] validateStatement called for type: 7
[DEBUG] validateStatement called for type: 7
[DEBUG] validateStatement called for type: 7
[DEBUG] validateStatement called for type: 28
[DEBUG] validateStatement called for type: 7
[DEBUG] validateStatement called for type: 22
[DEBUG] validateStatement called for type: 16
[DEBUG] validateStatement called for type: 7
[DEBUG] validateStatement called for type: 16
[DEBUG] pass2_validate: line 1140 has 1 statements
[DEBUG] validateStatement called for type: 93
[DEBUG] validateStatement called for type: 43
[DEBUG] validateStatement called for type: 43
[DEBUG] validateStatement called for type: 43
[DEBUG] validateStatement called for type: 43
[DEBUG] validateStatement called for type: 7
[DEBUG] validateStatement called for type: 7
[DEBUG] validateStatement called for type: 7
[DEBUG] validateStatement called for type: 28
[DEBUG] validateStatement called for type: 7
[DEBUG] validateStatement called for type: 22
[DEBUG] validateStatement called for type: 7
[DEBUG] validateStatement called for type: 7
[DEBUG] validateStatement called for type: 7
[DEBUG] validateStatement called for type: 16
[DEBUG] Finished pass2_validate
[DEBUG] validateControlFlow called, FOR stack size: 0
[INFO] Building complete ProgramCFG (main + all SUBs/FUNCTIONs)...
[INFO] ProgramCFG build successful!
[INFO] Main program CFG + 2 function/subroutine CFGs

╔══════════════════════════════════════════════════════════════════════════╗
║                    PROGRAM CFG ANALYSIS REPORT                           ║
╚══════════════════════════════════════════════════════════════════════════╝

Total CFGs: 3
  - Main Program: 1
  - Functions/Subs: 2


+==========================================================================+
|                       CFG ANALYSIS REPORT                                 |
+==========================================================================╝

Phase: Main Program
Function: main

------------------------------------------------------------------------------
SUMMARY METRICS
------------------------------------------------------------------------------
  Basic Statistics:
    Total Blocks:         19
    Total Edges:          26
    Entry Block:           0
    Exit Block:            1
    Total Statements:     40
    Reachable Blocks:     19
    Unreachable:           0
    Cyclomatic Complexity: 9 (MEDIUM)

  Block Categories:
    Empty Blocks:          3
    Loop Headers:          1
    Loop Exits:            1
    Terminated:            1
    Multi-Pred:            8
    Multi-Succ:            8

  Edge Types:
    Conditional True:     16
    Jump:                 10

------------------------------------------------------------------------------
COMPACT FORMAT (for test validation)
------------------------------------------------------------------------------
CFG:main:B19:E26:S40:CC9:R19
EDGES: 0->2 2->3 2->4 3->5 3->6 5->6 6->7 6->8 7->8 8->9 8->10 9->11 9->12 11->13 11->14 13->14 14->12 12->10 10->15 10->16 15->16 16->2 4->17 4->18 17->18 18->1

==============================================================================
DETAILED BLOCK ANALYSIS
==============================================================================

+=== Block 0 (Entry) =======================================================+
| Flags: [ENTRY]
| Source Lines: 1000 1010 1020 1030 1040 1050 1060 1070 1080 1090
| Statements: 10
|   Types: LetStatement×4, PrintStatement×6
|   Detail:
|     [ 0] PrintStatement (line 1000)
|     [ 1] PrintStatement (line 1010)
|     [ 2] PrintStatement (line 1020)
|     [ 3] PrintStatement (line 1030)
|     [ 4] LetStatement (line 1040)
|     [ 5] LetStatement (line 1050)
|     [ 6] LetStatement (line 1060)
|     [ 7] LetStatement (line 1070)
|     [ 8] PrintStatement (line 1080)
|     [ 9] PrintStatement (line 1090)
| Predecessors (0): none
| Successors (1): 2
+============================================================================╝

+=== Block 1 (Exit) ========================================================+
| Flags: [EXIT] [EMPTY]
| Statements: 0
| Predecessors (1): 18
| Successors (0): none
+============================================================================╝

+=== Block 2 (While_Header) ================================================+
| Flags: [LOOP_HEADER]
| Statements: 1
|   Types: WhileStatement
|   Detail:
|     [ 0] WhileStatement
| Predecessors (2): 0, 16
| Successors (2): 3, 4
+============================================================================╝

+=== Block 3 (While_Body) ==================================================+
| Flags: [NORMAL]
| Statements: 4
|   Types: IfStatement, LetStatement×3
|   Detail:
|     [ 0] LetStatement
|     [ 1] LetStatement
|     [ 2] LetStatement
|     [ 3] IfStatement
| Predecessors (1): 2
| Successors (2): 5, 6
+============================================================================╝

+=== Block 4 (While_Exit) ==================================================+
| Flags: [LOOP_EXIT]
| Statements: 1
|   Types: IfStatement
|   Detail:
|     [ 0] IfStatement
| Predecessors (1): 2
| Successors (2): 17, 18
+============================================================================╝

+=== Block 5 (If_Then) =====================================================+
| Flags: [NORMAL]
| Statements: 1
|   Types: LetStatement
|   Detail:
|     [ 0] LetStatement
| Predecessors (1): 3
| Successors (1): 6
+============================================================================╝

+=== Block 6 (If_Merge) ====================================================+
| Flags: [NORMAL]
| Statements: 1
|   Types: IfStatement
|   Detail:
|     [ 0] IfStatement
| Predecessors (2): 3, 5
| Successors (2): 7, 8
+============================================================================╝

+=== Block 7 (If_Then) =====================================================+
| Flags: [NORMAL]
| Statements: 1
|   Types: LetStatement
|   Detail:
|     [ 0] LetStatement
| Predecessors (1): 6
| Successors (1): 8
+============================================================================╝

+=== Block 8 (If_Merge) ====================================================+
| Flags: [NORMAL]
| Statements: 1
|   Types: IfStatement
|   Detail:
|     [ 0] IfStatement
| Predecessors (2): 6, 7
| Successors (2): 9, 10
+============================================================================╝

+=== Block 9 (If_Then) =====================================================+
| Flags: [NORMAL]
| Statements: 1
|   Types: IfStatement
|   Detail:
|     [ 0] IfStatement
| Predecessors (1): 8
| Successors (2): 11, 12
+============================================================================╝

+=== Block 10 (If_Merge) ====================================================+
| Flags: [NORMAL]
| Statements: 2
|   Types: IfStatement, LetStatement
|   Detail:
|     [ 0] LetStatement
|     [ 1] IfStatement
| Predecessors (2): 8, 12
| Successors (2): 15, 16
+============================================================================╝

+=== Block 11 (If_Then) =====================================================+
| Flags: [NORMAL]
| Statements: 1
|   Types: IfStatement
|   Detail:
|     [ 0] IfStatement
| Predecessors (1): 9
| Successors (2): 13, 14
+============================================================================╝

+=== Block 12 (If_Merge) ====================================================+
| Flags: [EMPTY]
| Statements: 0
| Predecessors (2): 9, 14
| Successors (1): 10
+============================================================================╝

+=== Block 13 (If_Then) =====================================================+
| Flags: [NORMAL]
| Statements: 11
|   Types: LetStatement, PrintStatement×10
|   Detail:
|     [ 0] PrintStatement
|     [ 1] PrintStatement
|     [ 2] PrintStatement
|     [ 3] PrintStatement
|     [ 4] PrintStatement
|     [ 5] PrintStatement
|     [ 6] PrintStatement
|     [ 7] PrintStatement
|     [ 8] PrintStatement
|     [ 9] PrintStatement
|     [10] LetStatement
| Predecessors (1): 11
| Successors (1): 14
+============================================================================╝

+=== Block 14 (If_Merge) ====================================================+
| Flags: [EMPTY]
| Statements: 0
| Predecessors (2): 11, 13
| Successors (1): 12
+============================================================================╝

+=== Block 15 (If_Then) =====================================================+
| Flags: [NORMAL]
| Statements: 1
|   Types: PrintStatement
|   Detail:
|     [ 0] PrintStatement
| Predecessors (1): 10
| Successors (1): 16
+============================================================================╝

+=== Block 16 (If_Merge) ====================================================+
| Flags: [NORMAL]
| Statements: 1
|   Types: LetStatement
|   Detail:
|     [ 0] LetStatement
| Predecessors (2): 10, 15
| Successors (1): 2
+============================================================================╝

+=== Block 17 (If_Then) =====================================================+
| Flags: [NORMAL]
| Statements: 2
|   Types: PrintStatement×2
|   Detail:
|     [ 0] PrintStatement
|     [ 1] PrintStatement
| Predecessors (1): 4
| Successors (1): 18
+============================================================================╝

+=== Block 18 (If_Merge) ====================================================+
| Flags: [TERMINATED]
| Statements: 1
|   Types: EndStatement
|   Detail:
|     [ 0] EndStatement
| Predecessors (2): 4, 17
| Successors (1): 1
+============================================================================╝

------------------------------------------------------------------------------
DETAILED EDGE ANALYSIS
------------------------------------------------------------------------------

Edge   0: Block   0 --[JUMP]--> Block   2
Edge   1: Block   2 --[TRUE]--> Block   3 ("true")
Edge   2: Block   2 --[TRUE]--> Block   4 ("false")
Edge   3: Block   3 --[TRUE]--> Block   5 ("true")
Edge   4: Block   3 --[TRUE]--> Block   6 ("false")
Edge   5: Block   5 --[JUMP]--> Block   6
Edge   6: Block   6 --[TRUE]--> Block   7 ("true")
Edge   7: Block   6 --[TRUE]--> Block   8 ("false")
Edge   8: Block   7 --[JUMP]--> Block   8
Edge   9: Block   8 --[TRUE]--> Block   9 ("true")
Edge  10: Block   8 --[TRUE]--> Block  10 ("false")
Edge  11: Block   9 --[TRUE]--> Block  11 ("true")
Edge  12: Block   9 --[TRUE]--> Block  12 ("false")
Edge  13: Block  11 --[TRUE]--> Block  13 ("true")
Edge  14: Block  11 --[TRUE]--> Block  14 ("false")
Edge  15: Block  13 --[JUMP]--> Block  14
Edge  16: Block  14 --[JUMP]--> Block  12 <- BACK-EDGE
Edge  17: Block  12 --[JUMP]--> Block  10 <- BACK-EDGE
Edge  18: Block  10 --[TRUE]--> Block  15 ("true")
Edge  19: Block  10 --[TRUE]--> Block  16 ("false")
Edge  20: Block  15 --[JUMP]--> Block  16
Edge  21: Block  16 --[JUMP]--> Block   2 <- BACK-EDGE
Edge  22: Block   4 --[TRUE]--> Block  17 ("true")
Edge  23: Block   4 --[TRUE]--> Block  18 ("false")
Edge  24: Block  17 --[JUMP]--> Block  18
Edge  25: Block  18 --[JUMP]--> Block   1 <- BACK-EDGE

------------------------------------------------------------------------------
CONTROL FLOW ANALYSIS
------------------------------------------------------------------------------

✓ All non-exit blocks are reachable from entry

DETECTED LOOPS (back-edges):
  - Block 14 → Block 12
  - Block 12 → Block 10
  - Block 16 → Block 2
  - Block 18 → Block 1

DECISION POINTS (blocks with multiple successors): 8
  - Block 2 (While_Header) → 2 paths
  - Block 3 (While_Body) → 2 paths
  - Block 4 (While_Exit) → 2 paths
  - Block 6 (If_Merge) → 2 paths
  - Block 8 (If_Merge) → 2 paths
  - Block 9 (If_Then) → 2 paths
  - Block 10 (If_Merge) → 2 paths
  - Block 11 (If_Then) → 2 paths

JOIN POINTS (blocks with multiple predecessors): 8
  - Block 2 (While_Header) ← 2 paths
  - Block 6 (If_Merge) ← 2 paths
  - Block 8 (If_Merge) ← 2 paths
  - Block 10 (If_Merge) ← 2 paths
  - Block 12 (If_Merge) ← 2 paths
  - Block 14 (If_Merge) ← 2 paths
  - Block 16 (If_Merge) ← 2 paths
  - Block 18 (If_Merge) ← 2 paths

==============================================================================
END OF CFG ANALYSIS REPORT
==============================================================================


+==========================================================================+
|                       CFG ANALYSIS REPORT                                 |
+==========================================================================╝

Phase: ModularPower
Function: ModularPower
Parameters: 3 (basenum, exponent, m)
Return Type: INTEGER

------------------------------------------------------------------------------
SUMMARY METRICS
------------------------------------------------------------------------------
  Basic Statistics:
    Total Blocks:          7
    Total Edges:           8
    Entry Block:           0
    Exit Block:            1
    Total Statements:     14
    Reachable Blocks:      7
    Unreachable:           0
    Cyclomatic Complexity: 3 (LOW)

  Block Categories:
    Empty Blocks:          1
    Loop Headers:          1
    Loop Exits:            1
    Terminated:            1
    Multi-Pred:            2
    Multi-Succ:            2

  Edge Types:
    Conditional True:      4
    Jump:                  4

------------------------------------------------------------------------------
COMPACT FORMAT (for test validation)
------------------------------------------------------------------------------
CFG:ModularPower:B7:E8:S14:CC3:R7
EDGES: 0->2 2->3 2->4 3->5 3->6 5->6 6->2 4->1

==============================================================================
DETAILED BLOCK ANALYSIS
==============================================================================

+=== Block 0 (Entry) =======================================================+
| Flags: [ENTRY]
| Statements: 7
|   Types: LetStatement×3, LocalStatement×4
|   Detail:
|     [ 0] LocalStatement
|     [ 1] LocalStatement
|     [ 2] LocalStatement
|     [ 3] LocalStatement
|     [ 4] LetStatement
|     [ 5] LetStatement
|     [ 6] LetStatement
| Predecessors (0): none
| Successors (1): 2
+============================================================================╝

+=== Block 1 (Exit) ========================================================+
| Flags: [EXIT] [EMPTY]
| Statements: 0
| Predecessors (1): 4
| Successors (0): none
+============================================================================╝

+=== Block 2 (While_Header) ================================================+
| Flags: [LOOP_HEADER]
| Statements: 1
|   Types: WhileStatement
|   Detail:
|     [ 0] WhileStatement
| Predecessors (2): 0, 6
| Successors (2): 3, 4
+============================================================================╝

+=== Block 3 (While_Body) ==================================================+
| Flags: [NORMAL]
| Statements: 2
|   Types: IfStatement, LetStatement
|   Detail:
|     [ 0] LetStatement
|     [ 1] IfStatement
| Predecessors (1): 2
| Successors (2): 5, 6
+============================================================================╝

+=== Block 4 (While_Exit) ==================================================+
| Flags: [TERMINATED] [LOOP_EXIT]
| Statements: 1
|   Types: ReturnStatement
|   Detail:
|     [ 0] ReturnStatement
| Predecessors (1): 2
| Successors (1): 1
+============================================================================╝

+=== Block 5 (If_Then) =====================================================+
| Flags: [NORMAL]
| Statements: 1
|   Types: LetStatement
|   Detail:
|     [ 0] LetStatement
| Predecessors (1): 3
| Successors (1): 6
+============================================================================╝

+=== Block 6 (If_Merge) ====================================================+
| Flags: [NORMAL]
| Statements: 2
|   Types: LetStatement×2
|   Detail:
|     [ 0] LetStatement
|     [ 1] LetStatement
| Predecessors (2): 3, 5
| Successors (1): 2
+============================================================================╝

------------------------------------------------------------------------------
DETAILED EDGE ANALYSIS
------------------------------------------------------------------------------

Edge   0: Block   0 --[JUMP]--> Block   2
Edge   1: Block   2 --[TRUE]--> Block   3 ("true")
Edge   2: Block   2 --[TRUE]--> Block   4 ("false")
Edge   3: Block   3 --[TRUE]--> Block   5 ("true")
Edge   4: Block   3 --[TRUE]--> Block   6 ("false")
Edge   5: Block   5 --[JUMP]--> Block   6
Edge   6: Block   6 --[JUMP]--> Block   2 <- BACK-EDGE
Edge   7: Block   4 --[JUMP]--> Block   1 <- BACK-EDGE

------------------------------------------------------------------------------
CONTROL FLOW ANALYSIS
------------------------------------------------------------------------------

✓ All non-exit blocks are reachable from entry

DETECTED LOOPS (back-edges):
  - Block 6 → Block 2
  - Block 4 → Block 1

DECISION POINTS (blocks with multiple successors): 2
  - Block 2 (While_Header) → 2 paths
  - Block 3 (While_Body) → 2 paths

JOIN POINTS (blocks with multiple predecessors): 2
  - Block 2 (While_Header) ← 2 paths
  - Block 6 (If_Merge) ← 2 paths

==============================================================================
END OF CFG ANALYSIS REPORT
==============================================================================


+==========================================================================+
|                       CFG ANALYSIS REPORT                                 |
+==========================================================================╝

Phase: IsPrime
Function: IsPrime
Parameters: 1 (n)
Return Type: INTEGER

------------------------------------------------------------------------------
SUMMARY METRICS
------------------------------------------------------------------------------
  Basic Statistics:
    Total Blocks:         15
    Total Edges:          20
    Entry Block:           0
    Exit Block:            1
    Total Statements:     23
    Reachable Blocks:     15
    Unreachable:           0
    Cyclomatic Complexity: 7 (MEDIUM)

  Block Categories:
    Empty Blocks:          1
    Loop Headers:          1
    Loop Exits:            1
    Terminated:            6
    Multi-Pred:            2
    Multi-Succ:            6

  Edge Types:
    Conditional True:     12
    Jump:                  8

------------------------------------------------------------------------------
COMPACT FORMAT (for test validation)
------------------------------------------------------------------------------
CFG:IsPrime:B15:E20:S23:CC7:R15
EDGES: 0->2 0->3 2->1 3->4 3->5 4->1 5->6 5->7 6->1 7->8 7->9 8->1 9->10 10->11 10->12 11->13 11->14 13->1 14->10 12->1

==============================================================================
DETAILED BLOCK ANALYSIS
==============================================================================

+=== Block 0 (Entry) =======================================================+
| Flags: [ENTRY]
| Statements: 6
|   Types: IfStatement, LocalStatement×5
|   Detail:
|     [ 0] LocalStatement
|     [ 1] LocalStatement
|     [ 2] LocalStatement
|     [ 3] LocalStatement
|     [ 4] LocalStatement
|     [ 5] IfStatement
| Predecessors (0): none
| Successors (2): 2, 3
+============================================================================╝

+=== Block 1 (Exit) ========================================================+
| Flags: [EXIT] [EMPTY]
| Statements: 0
| Predecessors (6): 2, 4, 6, 8, 13, 12
| Successors (0): none
+============================================================================╝

+=== Block 2 (If_Then) =====================================================+
| Flags: [TERMINATED]
| Statements: 1
|   Types: ReturnStatement
|   Detail:
|     [ 0] ReturnStatement
| Predecessors (1): 0
| Successors (1): 1
+============================================================================╝

+=== Block 3 (If_Merge) ====================================================+
| Flags: [NORMAL]
| Statements: 1
|   Types: IfStatement
|   Detail:
|     [ 0] IfStatement
| Predecessors (1): 0
| Successors (2): 4, 5
+============================================================================╝

+=== Block 4 (If_Then) =====================================================+
| Flags: [TERMINATED]
| Statements: 1
|   Types: ReturnStatement
|   Detail:
|     [ 0] ReturnStatement
| Predecessors (1): 3
| Successors (1): 1
+============================================================================╝

+=== Block 5 (If_Merge) ====================================================+
| Flags: [NORMAL]
| Statements: 1
|   Types: IfStatement
|   Detail:
|     [ 0] IfStatement
| Predecessors (1): 3
| Successors (2): 6, 7
+============================================================================╝

+=== Block 6 (If_Then) =====================================================+
| Flags: [TERMINATED]
| Statements: 1
|   Types: ReturnStatement
|   Detail:
|     [ 0] ReturnStatement
| Predecessors (1): 5
| Successors (1): 1
+============================================================================╝

+=== Block 7 (If_Merge) ====================================================+
| Flags: [NORMAL]
| Statements: 2
|   Types: IfStatement, LetStatement
|   Detail:
|     [ 0] LetStatement
|     [ 1] IfStatement
| Predecessors (1): 5
| Successors (2): 8, 9
+============================================================================╝

+=== Block 8 (If_Then) =====================================================+
| Flags: [TERMINATED]
| Statements: 1
|   Types: ReturnStatement
|   Detail:
|     [ 0] ReturnStatement
| Predecessors (1): 7
| Successors (1): 1
+============================================================================╝

+=== Block 9 (If_Merge) ====================================================+
| Flags: [NORMAL]
| Statements: 3
|   Types: LetStatement×3
|   Detail:
|     [ 0] LetStatement
|     [ 1] LetStatement
|     [ 2] LetStatement
| Predecessors (1): 7
| Successors (1): 10
+============================================================================╝

+=== Block 10 (While_Header) ================================================+
| Flags: [LOOP_HEADER]
| Statements: 1
|   Types: WhileStatement
|   Detail:
|     [ 0] WhileStatement
| Predecessors (2): 9, 14
| Successors (2): 11, 12
+============================================================================╝

+=== Block 11 (While_Body) ==================================================+
| Flags: [NORMAL]
| Statements: 2
|   Types: IfStatement, LetStatement
|   Detail:
|     [ 0] LetStatement
|     [ 1] IfStatement
| Predecessors (1): 10
| Successors (2): 13, 14
+============================================================================╝

+=== Block 12 (While_Exit) ==================================================+
| Flags: [TERMINATED] [LOOP_EXIT]
| Statements: 1
|   Types: ReturnStatement
|   Detail:
|     [ 0] ReturnStatement
| Predecessors (1): 10
| Successors (1): 1
+============================================================================╝

+=== Block 13 (If_Then) =====================================================+
| Flags: [TERMINATED]
| Statements: 1
|   Types: ReturnStatement
|   Detail:
|     [ 0] ReturnStatement
| Predecessors (1): 11
| Successors (1): 1
+============================================================================╝

+=== Block 14 (If_Merge) ====================================================+
| Flags: [NORMAL]
| Statements: 1
|   Types: LetStatement
|   Detail:
|     [ 0] LetStatement
| Predecessors (1): 11
| Successors (1): 10
+============================================================================╝

------------------------------------------------------------------------------
DETAILED EDGE ANALYSIS
------------------------------------------------------------------------------

Edge   0: Block   0 --[TRUE]--> Block   2 ("true")
Edge   1: Block   0 --[TRUE]--> Block   3 ("false")
Edge   2: Block   2 --[JUMP]--> Block   1 <- BACK-EDGE
Edge   3: Block   3 --[TRUE]--> Block   4 ("true")
Edge   4: Block   3 --[TRUE]--> Block   5 ("false")
Edge   5: Block   4 --[JUMP]--> Block   1 <- BACK-EDGE
Edge   6: Block   5 --[TRUE]--> Block   6 ("true")
Edge   7: Block   5 --[TRUE]--> Block   7 ("false")
Edge   8: Block   6 --[JUMP]--> Block   1 <- BACK-EDGE
Edge   9: Block   7 --[TRUE]--> Block   8 ("true")
Edge  10: Block   7 --[TRUE]--> Block   9 ("false")
Edge  11: Block   8 --[JUMP]--> Block   1 <- BACK-EDGE
Edge  12: Block   9 --[JUMP]--> Block  10
Edge  13: Block  10 --[TRUE]--> Block  11 ("true")
Edge  14: Block  10 --[TRUE]--> Block  12 ("false")
Edge  15: Block  11 --[TRUE]--> Block  13 ("true")
Edge  16: Block  11 --[TRUE]--> Block  14 ("false")
Edge  17: Block  13 --[JUMP]--> Block   1 <- BACK-EDGE
Edge  18: Block  14 --[JUMP]--> Block  10 <- BACK-EDGE
Edge  19: Block  12 --[JUMP]--> Block   1 <- BACK-EDGE

------------------------------------------------------------------------------
CONTROL FLOW ANALYSIS
------------------------------------------------------------------------------

✓ All non-exit blocks are reachable from entry

DETECTED LOOPS (back-edges):
  - Block 2 → Block 1
  - Block 4 → Block 1
  - Block 6 → Block 1
  - Block 8 → Block 1
  - Block 13 → Block 1
  - Block 14 → Block 10
  - Block 12 → Block 1

DECISION POINTS (blocks with multiple successors): 6
  - Block 0 (Entry) → 2 paths
  - Block 3 (If_Merge) → 2 paths
  - Block 5 (If_Merge) → 2 paths
  - Block 7 (If_Merge) → 2 paths
  - Block 10 (While_Header) → 2 paths
  - Block 11 (While_Body) → 2 paths

JOIN POINTS (blocks with multiple predecessors): 2
  - Block 1 (Exit) ← 6 paths
  - Block 10 (While_Header) ← 2 paths

==============================================================================
END OF CFG ANALYSIS REPORT
==============================================================================


========================================
CODE GENERATION: DISABLED
========================================
The new CFG builder generates correct control flow graphs.
Code generation will be re-enabled after adapting the
QBE code generator to work with the new CFG structure.

To test CFG generation:
  ./qbe_basic -G program.bas

========================================

[DEBUG] compile_basic_to_il: Returned from wrapper
[DEBUG] compile_basic_to_il: qbe_il is valid
[DEBUG] compile_basic_to_il: len = 0
[DEBUG] compile_basic_to_il: About to call fmemopen...
[DEBUG] compile_basic_to_il: fmemopen returned
[DEBUG] compile_basic_to_il: fmemopen failed, freeing and returning NULL
failed to compile BASIC file 'tests/rosetta//mersenne_factors2.bas'
