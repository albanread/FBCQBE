    # Generated by FasterBASIC QBE Code Generator
    # Target: QBE IL (SSA format)
    # 
    # External runtime functions from libbasic_runtime.a

    # === MAIN FUNCTION ===

export function w $main() {
@start
    # Initialize runtime
    call $basic_runtime_init()

    # Variable declarations
    %var_X_INT =l copy 0

    # Program basic blocks (CFG-driven)
    jmp @block_0

@block_0
    # Block 0 (Entry) [Lines: 10, 20, 30, 40, 50, 60]
    # TRY setup - push exception context and setjmp
    %t0 =l call $basic_exception_push(w 0)
    %t1 =w call $setjmp(l %t0)
    # Branch: if exception (non-zero) goto dispatch, else goto try body
    jnz %t1, @block_2, @block_1

@block_1
    # Block 1 (TRY Body)
    %t2 =l copy $data_str.0
    %t3 =l call $string_new_utf8(l %t2)
    call $basic_print_string_desc(l %t3)
    call $basic_print_newline()
    %t4 =d copy d_42.000000
    %t5 =l dtosi %t4
    %var_X_INT =l copy %t5
    %t6 =l copy $data_str.1
    %t7 =l call $string_new_utf8(l %t6)
    call $basic_print_string_desc(l %t7)
    %t8 =l extsw %var_X_INT
    call $basic_print_int(l %t8)
    call $basic_print_newline()
    jmp @block_4

@block_2
    # Block 2 (Exception Dispatch)
    # Exception dispatch - check error code and route to CATCH
    %t9 =w call $basic_err()
    %t10 =w ceqw %t9, 100
    # Jump to CATCH if error matches, else re-throw
    jnz %t10, @block_3, @rethrow_2

@rethrow_2
    # No CATCH matched - re-throw exception
    call $basic_rethrow()

@block_3
    # Block 3 (CATCH 100)
    %t11 =l copy $data_str.2
    %t12 =l call $string_new_utf8(l %t11)
    call $basic_print_string_desc(l %t12)
    call $basic_print_newline()
    jmp @exit

@block_4
    # Block 4 (After TRY) [Lines: 70, 80, 90, 100, 110]
    # TRY setup - push exception context and setjmp
    %t13 =l call $basic_exception_push(w 0)
    %t14 =w call $setjmp(l %t13)
    # Branch: if exception (non-zero) goto dispatch, else goto try body
    jnz %t14, @block_6, @block_5

@block_5
    # Block 5 (TRY Body)
    %t15 =l copy $data_str.3
    %t16 =l call $string_new_utf8(l %t15)
    call $basic_print_string_desc(l %t16)
    call $basic_print_newline()
    # THROW - Raise exception
    %t17 =d copy d_100.000000
    %t18 =w dtosi %t17
    call $basic_throw(w %t18)
    # Unreachable - THROW does not return
    %t19 =l copy $data_str.4
    %t20 =l call $string_new_utf8(l %t19)
    call $basic_print_string_desc(l %t20)
    call $basic_print_newline()
    jmp @exit

@block_6
    # Block 6 (Exception Dispatch)
    # Exception dispatch - check error code and route to CATCH
    %t21 =w call $basic_err()
    %t22 =w ceqw %t21, 100
    # Jump to CATCH if error matches, else re-throw
    jnz %t22, @block_7, @rethrow_6

@rethrow_6
    # No CATCH matched - re-throw exception
    call $basic_rethrow()

@block_7
    # Block 7 (CATCH 100)
    %t23 =l copy $data_str.5
    %t24 =l call $string_new_utf8(l %t23)
    call $basic_print_string_desc(l %t24)
    call $basic_print_newline()
    %t25 =l copy $data_str.6
    %t26 =l call $string_new_utf8(l %t25)
    call $basic_print_string_desc(l %t26)
    %t28 =w call $basic_err()
    %t29 =l extsw %t28
    call $basic_print_int(l %t29)
    call $basic_print_newline()
    %t31 =w call $basic_err()
    %t32 =d copy d_100.000000
    %t34 =l extsw %t31
    %t33 =d sltof %t34
    %t36 =w cned %t33, %t32
    %t37 =w cnew %t36, 0
    jnz %t37, @then_0, @else_1
@then_0
    %t38 =l copy $data_str.7
    %t39 =l call $string_new_utf8(l %t38)
    call $basic_print_string_desc(l %t39)
    call $basic_print_newline()
    jmp @exit
@else_1
    jmp @endif_2
@endif_2
    %t40 =l copy $data_str.8
    %t41 =l call $string_new_utf8(l %t40)
    call $basic_print_string_desc(l %t41)
    call $basic_print_newline()

@block_8
    # Block 8 (After TRY) [Lines: 120, 130, 140, 150]
    # TRY setup - push exception context and setjmp
    %t42 =l call $basic_exception_push(w 0)
    %t43 =w call $setjmp(l %t42)
    # Branch: if exception (non-zero) goto dispatch, else goto try body
    jnz %t43, @block_10, @block_9

@block_9
    # Block 9 (TRY Body)
    %t44 =l copy $data_str.9
    %t45 =l call $string_new_utf8(l %t44)
    call $basic_print_string_desc(l %t45)
    call $basic_print_newline()
    # THROW - Raise exception
    %t46 =d copy d_200.000000
    %t47 =w dtosi %t46
    call $basic_throw(w %t47)
    # Unreachable - THROW does not return
    %t48 =l copy $data_str.4
    %t49 =l call $string_new_utf8(l %t48)
    call $basic_print_string_desc(l %t49)
    call $basic_print_newline()
    jmp @exit

@block_10
    # Block 10 (Exception Dispatch)
    # Exception dispatch - check error code and route to CATCH
    %t50 =w call $basic_err()
    %t51 =w ceqw %t50, 100
    # Jump to CATCH if error matches
    jnz %t51, @block_11, @check_catch_1_10

@check_catch_1_10
    %t52 =w ceqw %t50, 200
    # Jump to CATCH if error matches
    jnz %t52, @block_12, @check_catch_2_10

@check_catch_2_10
    %t53 =w ceqw %t50, 300
    # Jump to CATCH if error matches, else re-throw
    jnz %t53, @block_13, @rethrow_10

@rethrow_10
    # No CATCH matched - re-throw exception
    call $basic_rethrow()

@block_11
    # Block 11 (CATCH 100)
    %t54 =l copy $data_str.10
    %t55 =l call $string_new_utf8(l %t54)
    call $basic_print_string_desc(l %t55)
    call $basic_print_newline()
    jmp @exit

@block_12
    # Block 12 (CATCH 200)
    %t56 =l copy $data_str.11
    %t57 =l call $string_new_utf8(l %t56)
    call $basic_print_string_desc(l %t57)
    call $basic_print_newline()
    %t59 =w call $basic_err()
    %t60 =d copy d_200.000000
    %t62 =l extsw %t59
    %t61 =d sltof %t62
    %t64 =w cned %t61, %t60
    %t65 =w cnew %t64, 0
    jnz %t65, @then_3, @else_4
@then_3
    %t66 =l copy $data_str.7
    %t67 =l call $string_new_utf8(l %t66)
    call $basic_print_string_desc(l %t67)
    call $basic_print_newline()
    jmp @exit
@else_4
    jmp @endif_5
@endif_5
    %t68 =l copy $data_str.12
    %t69 =l call $string_new_utf8(l %t68)
    call $basic_print_string_desc(l %t69)
    call $basic_print_newline()
    jmp @block_14

@block_13
    # Block 13 (CATCH 300)
    %t70 =l copy $data_str.13
    %t71 =l call $string_new_utf8(l %t70)
    call $basic_print_string_desc(l %t71)
    call $basic_print_newline()
    jmp @exit

@block_14
    # Block 14 (After TRY) [Lines: 160, 170, 180, 190]
    # TRY setup - push exception context and setjmp
    %t72 =l call $basic_exception_push(w 0)
    %t73 =w call $setjmp(l %t72)
    # Branch: if exception (non-zero) goto dispatch, else goto try body
    jnz %t73, @block_16, @block_15

@block_15
    # Block 15 (TRY Body)
    # THROW - Raise exception
    %t74 =d copy d_1.000000
    %t75 =w dtosi %t74
    call $basic_throw(w %t75)
    # Unreachable - THROW does not return
    jmp @block_18

@block_16
    # Block 16 (Exception Dispatch)
    # Exception dispatch - check error code and route to CATCH
    %t76 =w call $basic_err()
    %t77 =w ceqw %t76, 1
    # Jump to CATCH if error matches, else re-throw
    jnz %t77, @block_17, @rethrow_16

@rethrow_16
    # No CATCH matched - re-throw exception
    call $basic_rethrow()

@block_17
    # Block 17 (CATCH 1)
    %t78 =l copy $data_str.14
    %t79 =l call $string_new_utf8(l %t78)
    call $basic_print_string_desc(l %t79)
    %t81 =w call $basic_err()
    %t82 =l extsw %t81
    call $basic_print_int(l %t82)
    call $basic_print_newline()
    %t83 =l copy $data_str.15
    %t84 =l call $string_new_utf8(l %t83)
    call $basic_print_string_desc(l %t84)
    call $basic_print_newline()

@block_18
    # Block 18 (After TRY) [Lines: 200, 210, 220]
    # TRY setup - push exception context and setjmp
    %t85 =l call $basic_exception_push(w 0)
    %t86 =w call $setjmp(l %t85)
    # Branch: if exception (non-zero) goto dispatch, else goto try body
    jnz %t86, @block_20, @block_19

@block_19
    # Block 19 (TRY Body)
    # THROW - Raise exception
    %t87 =d copy d_999.000000
    %t88 =w dtosi %t87
    call $basic_throw(w %t88)
    # Unreachable - THROW does not return
    jmp @block_22

@block_20
    # Block 20 (Exception Dispatch)
    # Exception dispatch - check error code and route to CATCH
    %t89 =w call $basic_err()
    %t90 =w ceqw %t89, 999
    # Jump to CATCH if error matches, else re-throw
    jnz %t90, @block_21, @rethrow_20

@rethrow_20
    # No CATCH matched - re-throw exception
    call $basic_rethrow()

@block_21
    # Block 21 (CATCH 999)
    %t91 =l copy $data_str.16
    %t92 =l call $string_new_utf8(l %t91)
    call $basic_print_string_desc(l %t92)
    %t94 =w call $basic_err()
    %t95 =l extsw %t94
    call $basic_print_int(l %t95)
    call $basic_print_newline()
    %t96 =l copy $data_str.17
    %t97 =l call $string_new_utf8(l %t96)
    call $basic_print_string_desc(l %t97)
    call $basic_print_newline()

@block_22
    # Block 22 (After TRY) [Lines: 230, 240, 250]
    # Line 230
    %t98 =l copy $data_str.18
    %t99 =l call $string_new_utf8(l %t98)
    call $basic_print_string_desc(l %t99)
    call $basic_print_newline()
    # Line 240
    %t100 =l copy $data_str.19
    %t101 =l call $string_new_utf8(l %t100)
    call $basic_print_string_desc(l %t101)
    call $basic_print_newline()
    # Line 250
    jmp @exit

@block_23
    # Block 23 (Exit)
    jmp @exit

@exit
    # Cleanup and return
    call $basic_runtime_cleanup()
    ret 0
}
    # === DATA SECTION ===

    # No DATA statements - empty symbols
export data $__basic_data = { l 0 }
export data $__basic_data_types = { b 0 }
export data $__basic_data_ptr = { l 0 }

    # GOSUB return stack
export data $return_stack = { w 0, w 0, w 0, w 0, w 0, w 0, w 0, w 0, w 0, w 0, w 0, w 0, w 0, w 0, w 0, w 0 }
export data $return_sp = { w 0 }

    # String literals
data $data_str.0 = { b "  Inside TRY block", b 0 }
data $data_str.1 = { b "  X% = ", b 0 }
data $data_str.2 = { b "  ERROR: Should not reach CATCH", b 0 }
data $data_str.3 = { b "  Before THROW", b 0 }
data $data_str.4 = { b "  ERROR: Should not reach here", b 0 }
data $data_str.5 = { b "  Caught error 100", b 0 }
data $data_str.6 = { b "  ERR() = ", b 0 }
data $data_str.7 = { b "  ERROR: ERR() mismatch", b 0 }
data $data_str.8 = { b "  PASS: Caught error 100", b 0 }
data $data_str.9 = { b "  Throwing error 200", b 0 }
data $data_str.10 = { b "  ERROR: Wrong CATCH block (100)", b 0 }
data $data_str.11 = { b "  Caught error 200 in correct block", b 0 }
data $data_str.12 = { b "  PASS: Correct CATCH block executed", b 0 }
data $data_str.13 = { b "  ERROR: Wrong CATCH block (300)", b 0 }
data $data_str.14 = { b "  Caught error 1, ERR() = ", b 0 }
data $data_str.15 = { b "  PASS: Error 1 caught", b 0 }
data $data_str.16 = { b "  Caught error 999, ERR() = ", b 0 }
data $data_str.17 = { b "  PASS: Error 999 caught", b 0 }
data $data_str.18 = { b "", b 0 }
data $data_str.19 = { b "=== All Basic TRY/CATCH Tests PASSED ===", b 0 }

